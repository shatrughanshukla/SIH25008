{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/auth/success/page.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useRef, useCallback } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useToast } from '@/app/context/ToastContext';\nimport Image from 'next/image';\n\nexport default function AuthSuccess() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const toast = useToast();\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [isClient, setIsClient] = useState(false);\n  const [isNewUser, setIsNewUser] = useState(false);\n  const [username, setUsername] = useState('');\n  const [usernameError, setUsernameError] = useState('');\n  const [checkingUsername, setCheckingUsername] = useState(false);\n  const [userData, setUserData] = useState(null);\n  \n  // Refs to track state and prevent duplicate operations\n  const hasShownToast = useRef(false);\n  const hasProcessedAuth = useRef(false);\n  const redirectTimer = useRef(null);\n  const errorRedirectTimer = useRef(null);\n  \n  // Set isClient to true once component mounts (client-side only)\n  useEffect(() => {\n    setIsClient(true);\n    \n    // Pre-fill username field with a suggestion if we have user data\n    if (userData && userData.name && isNewUser) {\n      // Create a username suggestion based on their name\n      const nameParts = userData.name.toLowerCase().split(' ');\n      const suggestedUsername = nameParts[0] + (nameParts.length > 1 ? '_' + nameParts[1] : '');\n      // Remove any special characters\n      const cleanUsername = suggestedUsername.replace(/[^a-z0-9_]/g, '');\n      setUsername(cleanUsername);\n    }\n  }, [userData, isNewUser]);\n  \n  // Display initial success message only once\n  useEffect(() => {\n    if (isClient && !hasShownToast.current) {\n      toast.showSuccessToast('Login successful! Redirecting to dashboard...');\n      hasShownToast.current = true;\n    }\n  }, [isClient, toast]);\n\n  // Define completeAuthentication function outside of the useEffect\n  const completeAuthentication = useCallback((userDataResponse) => {\n    // Get token and userId from URL params\n    const token = searchParams.get('token');\n    const userId = searchParams.get('userId');\n    \n    if (!token || !userId) {\n      handleAuthError('Missing token or user ID');\n      return;\n    }\n    \n    try {\n      // Create user object with token and user data\n      const user = {\n        _id: userId,\n        name: userDataResponse.name,\n        email: userDataResponse.email,\n        username: userDataResponse.username,\n        role: userDataResponse.role || 'student', // Default to student if role is missing\n        profilePic: userDataResponse.profilePic, // Include profile picture\n        token: token\n      };\n\n      console.log('Saving user to localStorage:', user);\n      // Save user to localStorage\n      localStorage.setItem('user', JSON.stringify(user));\n      \n      // Store token separately in localStorage\n      localStorage.setItem('token', token);\n      \n      // Mark this auth process as completed\n      sessionStorage.setItem(`auth_processed_${userId}`, 'true');\n      \n      // Show success message (only if we haven't already)\n      if (!hasShownToast.current) {\n        toast.showSuccessToast('Successfully logged in with Google!');\n        hasShownToast.current = true;\n      }\n      \n      setLoading(false);\n      \n      // Redirect based on user role\n      const redirectPath = userDataResponse.role === 'teacher' ? '/dashboard/teacher' : '/dashboard/student';\n      console.log('Redirecting to:', redirectPath);\n      \n      // Add a small delay before redirecting to ensure localStorage is updated\n      redirectTimer.current = setTimeout(() => {\n        router.push(redirectPath);\n      }, 1500);\n    } catch (error) {\n      console.error('Error completing authentication:', error);\n      handleAuthError('Failed to complete authentication');\n    }\n  }, [searchParams, router, toast]);\n  \n  // Define handleAuthError function outside of the useEffect\n  const handleAuthError = useCallback((errorMessage) => {\n    setError(errorMessage || 'Authentication failed');\n    setLoading(false);\n    toast.showErrorToast(`Authentication error: ${errorMessage || 'Authentication failed'}`);\n    // Clear the auth processed flag on error\n    sessionStorage.removeItem('auth_processed');\n    errorRedirectTimer.current = setTimeout(() => {\n      router.push('/login');\n    }, 3000);\n  }, [router, toast]);\n\n  // Main authentication logic\n  useEffect(() => {\n    // Only run on client-side\n    if (!isClient) return;\n    \n    // Get token and userId from URL params\n    const token = searchParams.get('token');\n    const userId = searchParams.get('userId');\n\n    console.log('Auth Success Page - Token:', token ? 'Present' : 'Missing');\n    console.log('Auth Success Page - UserId:', userId ? 'Present' : 'Missing');\n\n    // Prevent processing more than once\n    if (hasProcessedAuth.current) return;\n    \n    // Check if we've already processed this login in a previous session\n    const hasProcessed = sessionStorage.getItem('auth_processed');\n    \n    if (hasProcessed) {\n      console.log('Auth already processed, redirecting to dashboard');\n      const storedUser = localStorage.getItem('user');\n      if (storedUser) {\n        try {\n          const user = JSON.parse(storedUser);\n          const redirectPath = user.role === 'teacher' ? '/dashboard/teacher' : '/dashboard/student';\n          router.push(redirectPath);\n        } catch (e) {\n          console.error('Error parsing stored user:', e);\n          router.push('/login');\n        }\n      } else {\n        router.push('/dashboard');\n      }\n      return;\n    }\n    \n    // Mark that we've started processing this authentication\n    hasProcessedAuth.current = true;\n    \n    const processAuthentication = async () => {\n      if (!token || !userId) {\n        handleAuthError('Missing token or user ID');\n        return;\n      }\n      \n      // Mark this authentication as processed in session storage\n      sessionStorage.setItem('auth_processed', 'true');\n      \n      try {\n        // Fetch user data to get role and other information\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';\n        const profileUrl = `${apiUrl}/api/users/profile`;\n        console.log('Fetching user profile from:', profileUrl);\n        \n        const response = await fetch(profileUrl, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        \n        console.log('Profile API Response Status:', response.status);\n        if (!response.ok) {\n          throw new Error(`Failed to fetch user profile: ${response.status}`);\n        }\n        \n        const userDataResponse = await response.json();\n        console.log('User data received:', userDataResponse);\n        setUserData(userDataResponse);\n        \n        // Check if this is a first-time login (new user)\n        // We'll consider it a new user if the username matches the auto-generated pattern\n        const usernamePattern = /_[a-z0-9]{6}$/; // Pattern for auto-generated usernames\n        if (userDataResponse.username && usernamePattern.test(userDataResponse.username)) {\n          console.log('New user detected, showing username form');\n          setIsNewUser(true);\n          setLoading(false);\n          return; // Stop here and show username form\n        }\n        \n        // For existing users, proceed with normal flow\n        completeAuthentication(userDataResponse);\n      } catch (error) {\n        console.error('Error during Google auth success:', error);\n        handleAuthError(error.message);\n      }\n    };\n      \n\n    \n    processAuthentication();\n    \n    // Return cleanup function to clear timers and session storage if component unmounts\n    return () => {\n      if (redirectTimer.current) clearTimeout(redirectTimer.current);\n      if (errorRedirectTimer.current) clearTimeout(errorRedirectTimer.current);\n    };\n  }, [isClient, searchParams, router, toast, completeAuthentication, handleAuthError]); // Add all dependencies\n\n  // Function to check username availability\n  const checkUsername = async (username) => {\n    if (!username || username.length < 3) {\n      setUsernameError('Username must be at least 3 characters');\n      return false;\n    }\n    \n    // Check for valid characters\n    const usernameRegex = /^[a-zA-Z0-9_]+$/;\n    if (!usernameRegex.test(username)) {\n      setUsernameError('Username can only contain letters, numbers, and underscores');\n      return false;\n    }\n    \n    try {\n      setCheckingUsername(true);\n      const response = await fetch(`/api/users/check-username?username=${encodeURIComponent(username)}`);\n      \n      if (!response.ok) {\n        throw new Error('Failed to check username availability');\n      }\n      \n      const data = await response.json();\n      \n      setUsernameError(data.exists ? 'Username already taken' : '');\n      setCheckingUsername(false);\n      return !data.exists;\n    } catch (error) {\n      console.error('Error checking username:', error);\n      setUsernameError('Error checking username availability');\n      setCheckingUsername(false);\n      return false;\n    }\n  };\n  \n  // Handle username submission\n  const handleUsernameSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!username || username.length < 3) {\n      setUsernameError('Username must be at least 3 characters');\n      return;\n    }\n    \n    // Check for valid characters\n    const usernameRegex = /^[a-zA-Z0-9_]+$/;\n    if (!usernameRegex.test(username)) {\n      setUsernameError('Username can only contain letters, numbers, and underscores');\n      return;\n    }\n    \n    const isAvailable = await checkUsername(username);\n    if (!isAvailable) {\n      return;\n    }\n    \n    try {\n      const token = searchParams.get('token');\n      const userId = searchParams.get('userId');\n      \n      if (!token || !userId) {\n        throw new Error('Missing authentication information');\n      }\n      \n      // Show loading state\n      setLoading(true);\n      \n      // Update the username in the database\n      const response = await fetch('/api/users/complete-profile', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({ userId, username }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to update username');\n      }\n      \n      const data = await response.json();\n      toast.showSuccessToast('Username updated successfully!');\n      \n      // Update user data in localStorage\n      if (data.user) {\n        localStorage.setItem('user', JSON.stringify(data.user));\n        // Also update the auth token if provided\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n        }\n      }\n      \n      // Complete the authentication process with the updated user data\n      completeAuthentication(data.user || data);\n    } catch (error) {\n      console.error('Error updating username:', error);\n      setUsernameError(error.message || 'Failed to update username');\n      setLoading(false);\n    }\n  };\n  \n  // Only render content when on client-side to prevent hydration mismatch\n  if (!isClient) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\n        <div className=\"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md\">\n          <div className=\"text-center\">\n            <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\n              Loading...\n            </h2>\n          </div>\n          <div className=\"flex justify-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\n      <div className=\"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md\">\n        {isNewUser ? (\n          <div>\n            <div className=\"text-center\">\n              <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\n                Complete Your Profile\n              </h2>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                Please choose a username for your account\n              </p>\n              \n              {userData && userData.profilePic && (\n                <div className=\"mt-4 flex justify-center\">\n                  <div className=\"relative w-24 h-24 rounded-full overflow-hidden\">\n                    <Image \n                      src={userData.profilePic} \n                      alt=\"Profile Picture\" \n                      fill\n                      className=\"object-cover\"\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            <form onSubmit={handleUsernameSubmit} className=\"mt-8 space-y-6\">\n              <div>\n                <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700\">\n                  Username\n                </label>\n                <div className=\"mt-1\">\n                  <input\n                    id=\"username\"\n                    name=\"username\"\n                    type=\"text\"\n                    required\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    onBlur={() => username.length >= 3 && checkUsername(username)}\n                    className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                    placeholder=\"Choose a username\"\n                    minLength={3}\n                    maxLength={20}\n                    pattern=\"[a-zA-Z0-9_]+\"\n                    title=\"Username can only contain letters, numbers, and underscores\"\n                  />\n                  {usernameError && (\n                    <p className=\"mt-2 text-sm text-red-600\">{usernameError}</p>\n                  )}\n                  {checkingUsername && (\n                    <p className=\"mt-2 text-sm text-gray-500\">Checking availability...</p>\n                  )}\n                </div>\n              </div>\n              \n              <div>\n                <button\n                  type=\"submit\"\n                  disabled={checkingUsername || !!usernameError || username.length < 3}\n                  className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                >\n                  Continue\n                </button>\n              </div>\n            </form>\n          </div>\n        ) : (\n          <>\n            <div className=\"text-center\">\n              <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\n                {error ? 'Authentication Error' : 'Completing login...'}\n              </h2>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                {error \n                  ? `Error: ${error}. Redirecting to login page...` \n                  : 'Please wait while we redirect you to your dashboard.'}\n              </p>\n              {/* Debug info - only visible during development */}\n              {process.env.NODE_ENV === 'development' && (\n                <div className=\"mt-4 p-4 bg-gray-100 rounded text-left text-xs\">\n                  <p>Debug Info:</p>\n                  <p>Token: {searchParams.get('token') ? 'Present' : 'Missing'}</p>\n                  <p>User ID: {searchParams.get('userId') ? 'Present' : 'Missing'}</p>\n                </div>\n              )}\n            </div>\n            <div className=\"flex justify-center\">\n              {loading ? (\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n              ) : error ? (\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              ) : (\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-green-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}
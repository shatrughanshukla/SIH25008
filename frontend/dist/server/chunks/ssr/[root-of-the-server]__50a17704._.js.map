{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/src/app/auth/success/page.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useToast } from '@/app/context/ToastContext';\n\nexport default function AuthSuccess() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const toast = useToast();\n  \n  // Display a message to the user immediately\n  useEffect(() => {\n    toast.showSuccessToast('Login successful! Redirecting to dashboard...');\n  }, [toast]);\n\n  useEffect(() => {\n    const token = searchParams.get('token');\n    const userId = searchParams.get('userId');\n\n    if (token && userId) {\n      // Fetch user data to get role and other information\n      fetch('http://localhost:5000/api/users/profile', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(response => {\n          if (!response.ok) {\n            throw new Error('Failed to fetch user profile');\n          }\n          return response.json();\n        })\n        .then(userData => {\n          // Create user object with token and user data\n          const user = {\n            _id: userId,\n            name: userData.name,\n            email: userData.email,\n            role: userData.role,\n            token: token\n          };\n\n          // Save user to localStorage\n          localStorage.setItem('user', JSON.stringify(user));\n          \n          // Show success message\n          toast.showSuccessToast('Successfully logged in with Google!');\n          \n          // Redirect based on user role\n          if (userData.role === 'student') {\n            router.push('/dashboard/student');\n          } else if (userData.role === 'teacher') {\n            router.push('/dashboard/teacher');\n          } else {\n            router.push('/');\n          }\n        })\n        .catch(error => {\n          console.error('Error during Google auth success:', error);\n          toast.showErrorToast('Failed to complete Google authentication');\n          router.push('/login');\n        });\n    } else {\n      toast.showErrorToast('Authentication failed. Missing token or user ID.');\n      router.push('/login');\n    }\n  }, [searchParams, router, toast]);\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\n      <div className=\"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md\">\n        <div className=\"text-center\">\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Completing login...</h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Please wait while we redirect you to your dashboard.\n          </p>\n        </div>\n        <div className=\"flex justify-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,8BCFzCL,GAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,iECAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,EAAQ,CAAA,EAAA,EAAA,QAAA,AAAQ,IA6DtB,MA1DA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EAAM,gBAAgB,CAAC,gDACzB,EAAG,CAAC,EAAM,EAEV,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAQ,EAAa,GAAG,CAAC,SACzB,EAAS,EAAa,GAAG,CAAC,UAE5B,GAAS,EAEX,MAFmB,AAEb,0CAA2C,CAC/C,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,CAClC,eAAgB,kBAClB,CACF,GACG,IAAI,CAAC,IACJ,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,gCAElB,OAAO,EAAS,IAAI,EACtB,GACC,IAAI,CAAC,IAEJ,IAAM,EAAO,CACX,IAAK,EACL,KAAM,EAAS,IAAI,CACnB,MAAO,EAAS,KAAK,CACrB,KAAM,EAAS,IAAI,CACnB,MAAO,CACT,EAGA,aAAa,OAAO,CAAC,OAAQ,KAAK,SAAS,CAAC,IAG5C,EAAM,gBAAgB,CAAC,uCAGD,WAAW,CAA7B,EAAS,IAAI,CACf,EAAO,IAAI,CAAC,sBACe,WAAW,CAA7B,EAAS,IAAI,CACtB,EAAO,IAAI,CAAC,sBAEZ,EAAO,IAAI,CAAC,IAEhB,GACC,KAAK,CAAC,IACL,QAAQ,KAAK,CAAC,oCAAqC,GACnD,EAAM,cAAc,CAAC,4CACrB,EAAO,IAAI,CAAC,SACd,IAEF,EAAM,cAAc,CAAC,oDACrB,EAAO,IAAI,CAAC,UAEhB,EAAG,CAAC,EAAc,EAAQ,EAAM,EAG9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sDAA6C,wBAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,4DAI5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFAKzB","ignoreList":[0,1,2]}
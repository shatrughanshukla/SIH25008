(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49073,e=>{"use strict";e.s(["default",()=>l]);var r=e.i(43476),s=e.i(71645),t=e.i(74826),a=e.i(11152);function l(e){let{type:l}=e,{login:n,register:i}=(0,t.useAuth)(),[c,o]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[b,f]=(0,s.useState)(null),[p,y]=(0,s.useState)("student"),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[k,S]=(0,s.useState)(null),[F,C]=(0,s.useState)(!1),[E,U]=(0,s.useState)(!1),[T,A]=(0,s.useState)(""),[I,P]=(0,s.useState)(""),H=(0,s.useId)(),W=(0,s.useId)(),R=(0,s.useId)(),q=(0,s.useId)(),O=(0,s.useId)(),G=(0,s.useId)(),L=(e,r)=>{let s;return function(){for(var t=arguments.length,a=Array(t),l=0;l<t;l++)a[l]=arguments[l];s&&clearTimeout(s),s=setTimeout(()=>e(...a),r)}},B=(0,s.useCallback)(L(async e=>{if(!e||e.length<3){w(null),A("Username must be at least 3 characters");return}try{C(!0);let r=await fetch("/api/auth/check-username/".concat(e)),s=await r.json();w(s.available),A(s.available?"":"Username already taken")}catch(e){console.error("Error checking username:",e),A("Error checking username availability")}finally{C(!1)}},500),[]),D=(0,s.useCallback)(L(async e=>{if(!e||!/^\S+@\S+\.\S+$/.test(e)){S(null),P("Please enter a valid email");return}try{U(!0);let r=await fetch("/api/auth/check-email/".concat(e)),s=await r.json();S(s.available),P(s.available?"":"Email already in use")}catch(e){console.error("Error checking email:",e),P("Error checking email availability")}finally{U(!1)}},500),[]);(0,s.useEffect)(()=>{"register"===l&&d&&B(d)},[l,d,B]),(0,s.useEffect)(()=>{"register"===l&&m&&D(m)},[l,m,D]);let K=async e=>{e.preventDefault(),v(!0);try{if("register"===l){if(d&&!N)throw Error("Username is already taken");if(m&&!k)throw Error("Email is already in use");let e=await i({name:c,username:d,email:m,password:x,role:p,profilePic:b});window.location.href="student"===e.role?"/dashboard/student":"/dashboard/teacher"}else{let e=await n(m,x);window.location.href="student"===e.role?"/dashboard/student":"/dashboard/teacher"}}catch(e){console.error("Authentication error:",e),alert(e.message||"Authentication failed")}finally{v(!1)}};return(0,r.jsxs)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 mb-2",children:"login"===l?"Sign in to your account":"Create your account"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:"login"===l?"Enter your credentials to access your account":"Fill in the information to get started"})]}),(0,r.jsxs)("form",{onSubmit:K,className:"space-y-4",children:["register"===l&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(a.FaUser,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:H,type:"text",placeholder:"Full Name",value:c,onChange:e=>o(e.target.value),className:"text-black w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,suppressHydrationWarning:!0})]}),"register"===l&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(a.FaUser,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:W,type:"text",placeholder:"Username",value:d,onChange:e=>u(e.target.value),className:"text-black w-full pl-10 pr-10 py-3 border ".concat(T?"border-red-500":N?"border-green-500":"border-gray-300"," rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),required:!0,suppressHydrationWarning:!0}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:F?(0,r.jsx)("div",{className:"h-5 w-5 border-t-2 border-blue-500 rounded-full animate-spin"}):d&&!0===N?(0,r.jsx)(a.FaCheck,{className:"h-5 w-5 text-green-500"}):d&&!1===N?(0,r.jsx)(a.FaTimes,{className:"h-5 w-5 text-red-500"}):null}),T&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"text-black absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(a.FaEnvelope,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:R,type:"email",placeholder:"Email Address",value:m,onChange:e=>h(e.target.value),className:"text-black w-full pl-10 pr-10 py-3 border ".concat(I?"border-red-500":k?"border-green-500":"border-gray-300"," rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),required:!0,suppressHydrationWarning:!0}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:E?(0,r.jsx)("div",{className:"h-5 w-5 border-t-2 border-blue-500 rounded-full animate-spin"}):m&&!0===k?(0,r.jsx)(a.FaCheck,{className:"h-5 w-5 text-green-500"}):m&&!1===k?(0,r.jsx)(a.FaTimes,{className:"h-5 w-5 text-red-500"}):null}),I&&"register"===l&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:I})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(a.FaLock,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:q,type:"password",placeholder:"Password",value:x,onChange:e=>g(e.target.value),className:"text-black w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,suppressHydrationWarning:!0})]}),"register"===l&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{htmlFor:O,className:"block text-gray-700 text-sm font-medium mb-2",children:"Profile Picture"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center mr-3",children:b?(0,r.jsx)("img",{src:URL.createObjectURL(b),alt:"Profile preview",className:"h-10 w-10 rounded-full object-cover"}):(0,r.jsx)(a.FaUser,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsxs)("label",{className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["Choose File",(0,r.jsx)("input",{type:"file",id:O,accept:"image/*",onChange:e=>{f(e.target.files[0])},className:"sr-only"})]}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:b?b.name:"No file chosen"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:G,className:"block text-gray-700 text-sm font-medium mb-2",children:"I am a"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center p-3 border ".concat("student"===p?"border-blue-500 bg-blue-50":"border-gray-300"," rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"),onClick:()=>y("student"),children:[(0,r.jsx)(a.FaUserGraduate,{className:"h-5 w-5 mr-2 ".concat("student"===p?"text-blue-500":"text-gray-400")}),(0,r.jsx)("span",{className:"".concat("student"===p?"font-medium text-blue-700":"text-gray-700"),children:"Student"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center p-3 border ".concat("teacher"===p?"border-blue-500 bg-blue-50":"border-gray-300"," rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"),onClick:()=>y("teacher"),children:[(0,r.jsx)(a.FaChalkboardTeacher,{className:"h-5 w-5 mr-2 ".concat("teacher"===p?"text-blue-500":"text-gray-400")}),(0,r.jsx)("span",{className:"".concat("teacher"===p?"font-medium text-blue-700":"text-gray-700"),children:"Teacher"})]})]}),(0,r.jsxs)("select",{id:G,value:p,onChange:e=>y(e.target.value),className:"sr-only",suppressHydrationWarning:!0,children:[(0,r.jsx)("option",{value:"student",children:"Student"}),(0,r.jsx)("option",{value:"teacher",children:"Teacher"})]})]})]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("button",{type:"submit",disabled:j||"register"===l&&(!1===N||!1===k),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 font-medium transition-colors duration-200 transform shadow-md hover:shadow-lg ".concat(j||"register"===l&&(!1===N||!1===k)?"opacity-70 cursor-not-allowed":""),suppressHydrationWarning:!0,children:j?"Processing...":"login"===l?"Sign In":"Create Account"})}),"login"===l&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",suppressHydrationWarning:!0}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-gray-700",children:"Remember me"})]}),(0,r.jsx)("div",{className:"text-blue-600 hover:text-blue-500 cursor-pointer",children:"Forgot password?"})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-700",children:"Or continue with"})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("a",{href:"/api/auth/google",className:"w-full flex items-center justify-center py-2.5 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)(a.FaGoogle,{className:"h-5 w-5 text-red-500 mr-2"}),"Sign ","login"===l?"in":"up"," with Google"]})}),(0,r.jsx)("div",{className:"text-center text-sm text-gray-700",children:"login"===l?(0,r.jsxs)("p",{children:["Don't have an account?"," ",(0,r.jsx)("a",{href:"/register",className:"font-medium text-blue-700 hover:text-blue-600",children:"Sign up"})]}):(0,r.jsxs)("p",{children:["Already have an account?"," ",(0,r.jsx)("a",{href:"/login",className:"font-medium text-blue-700 hover:text-blue-600",children:"Sign in"})]})})]})}}]);
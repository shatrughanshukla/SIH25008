{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/utils/authDiagnostics.js"],"sourcesContent":["/**\r\n * Authentication Diagnostics Utility\r\n * \r\n * This utility provides functions to help diagnose authentication issues\r\n * in the application. It includes tools for token validation, API testing,\r\n * and network diagnostics.\r\n */\r\n\r\n/**\r\n * Checks if a JWT token is valid and not expired\r\n * @param {string} token - The JWT token to validate\r\n * @returns {Object} - Token validity information\r\n */\r\nexport const validateToken = (token) => {\r\n  if (!token) {\r\n    return { valid: false, error: 'No token provided' };\r\n  }\r\n  \r\n  try {\r\n    // Split the token into parts\r\n    const parts = token.split('.');\r\n    if (parts.length !== 3) {\r\n      return { valid: false, error: 'Invalid token format' };\r\n    }\r\n    \r\n    // Decode the payload (middle part)\r\n    const payload = JSON.parse(atob(parts[1]));\r\n    \r\n    // Check expiration\r\n    const currentTime = Math.floor(Date.now() / 1000);\r\n    if (payload.exp && payload.exp < currentTime) {\r\n      return { \r\n        valid: false, \r\n        error: 'Token expired', \r\n        expiredAt: new Date(payload.exp * 1000).toLocaleString(),\r\n        currentTime: new Date().toLocaleString()\r\n      };\r\n    }\r\n    \r\n    return { \r\n      valid: true, \r\n      payload,\r\n      expiresAt: payload.exp ? new Date(payload.exp * 1000).toLocaleString() : 'No expiration'\r\n    };\r\n  } catch (error) {\r\n    return { valid: false, error: `Token validation error: ${error.message}` };\r\n  }\r\n};\r\n\r\n/**\r\n * Tests the API endpoint with the provided token\r\n * @param {string} endpoint - The API endpoint to test\r\n * @param {string} token - The JWT token to use for authentication\r\n * @returns {Promise<Object>} - API test results\r\n */\r\nexport const testApiEndpoint = async (endpoint, token) => {\r\n  const startTime = performance.now();\r\n  const results = { endpoint, success: false, timing: {} };\r\n  \r\n  try {\r\n    // Make the request with timing information\r\n    const response = await fetch(endpoint, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': token ? `Bearer ${token}` : '',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      cache: 'no-store'\r\n    });\r\n    \r\n    const endTime = performance.now();\r\n    results.timing.total = `${(endTime - startTime).toFixed(2)}ms`;\r\n    \r\n    // Get response details\r\n    results.status = response.status;\r\n    results.statusText = response.statusText;\r\n    results.headers = {};\r\n    \r\n    // Convert headers to object\r\n    response.headers.forEach((value, key) => {\r\n      results.headers[key] = value;\r\n    });\r\n    \r\n    // Try to parse response body\r\n    try {\r\n      results.data = await response.json();\r\n    } catch (e) {\r\n      results.data = 'Could not parse response as JSON';\r\n    }\r\n    \r\n    results.success = response.ok;\r\n    return results;\r\n  } catch (error) {\r\n    const endTime = performance.now();\r\n    results.timing.total = `${(endTime - startTime).toFixed(2)}ms`;\r\n    results.error = error.message;\r\n    return results;\r\n  }\r\n};\r\n\r\n/**\r\n * Runs a comprehensive authentication diagnostic\r\n * @returns {Promise<Object>} - Diagnostic results\r\n */\r\nexport const runAuthDiagnostic = async () => {\r\n  const results = {\r\n    timestamp: new Date().toISOString(),\r\n    environment: {},\r\n    localStorage: {},\r\n    tokenValidation: {},\r\n    apiTests: []\r\n  };\r\n  \r\n  // Check environment\r\n  results.environment = {\r\n    nextPublicApiUrl: process.env.NEXT_PUBLIC_API_URL || 'Not set',\r\n    baseUrl: window.location.origin,\r\n    userAgent: navigator.userAgent\r\n  };\r\n  \r\n  // Check localStorage\r\n  try {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      const user = JSON.parse(storedUser);\r\n      results.localStorage.user = {\r\n        found: true,\r\n        hasToken: !!user.token,\r\n        tokenPreview: user.token ? `${user.token.substring(0, 10)}...` : 'No token',\r\n        role: user.role || 'Not specified'\r\n      };\r\n      \r\n      // Validate token\r\n      if (user.token) {\r\n        results.tokenValidation = validateToken(user.token);\r\n      }\r\n      \r\n      // Test API endpoints\r\n      const endpoints = [\r\n        '/api/users/profile',\r\n        '/api/auth/verify'\r\n      ];\r\n      \r\n      for (const endpoint of endpoints) {\r\n        const apiResult = await testApiEndpoint(endpoint, user.token);\r\n        results.apiTests.push(apiResult);\r\n      }\r\n    } else {\r\n      results.localStorage.user = { found: false };\r\n    }\r\n  } catch (error) {\r\n    results.localStorage.error = error.message;\r\n  }\r\n  \r\n  return results;\r\n};\r\n\r\n/**\r\n * Logs diagnostic information to console in a formatted way\r\n * @param {Object} diagnosticResults - Results from runAuthDiagnostic\r\n */\r\nexport const logDiagnosticResults = (diagnosticResults) => {\r\n  console.group('🔍 Authentication Diagnostic Results');\r\n  console.log('Timestamp:', diagnosticResults.timestamp);\r\n  \r\n  console.group('Environment');\r\n  console.table(diagnosticResults.environment);\r\n  console.groupEnd();\r\n  \r\n  console.group('LocalStorage');\r\n  console.table(diagnosticResults.localStorage.user || diagnosticResults.localStorage.error);\r\n  console.groupEnd();\r\n  \r\n  if (diagnosticResults.tokenValidation.valid !== undefined) {\r\n    console.group('Token Validation');\r\n    console.table(diagnosticResults.tokenValidation);\r\n    console.groupEnd();\r\n  }\r\n  \r\n  console.group('API Tests');\r\n  diagnosticResults.apiTests.forEach((test, index) => {\r\n    console.group(`Test ${index + 1}: ${test.endpoint}`);\r\n    console.log('Status:', test.status, test.statusText);\r\n    console.log('Timing:', test.timing.total);\r\n    console.log('Success:', test.success);\r\n    if (test.error) console.error('Error:', test.error);\r\n    console.log('Response:', test.data);\r\n    console.groupEnd();\r\n  });\r\n  console.groupEnd();\r\n  \r\n  console.groupEnd();\r\n};\r\n\r\n/**\r\n * Run and log diagnostics in one step\r\n * @returns {Promise<Object>} - Diagnostic results\r\n */\r\nexport const diagnoseAuthIssues = async () => {\r\n  const results = await runAuthDiagnostic();\r\n  logDiagnosticResults(results);\r\n  return results;\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/utils/apiTester.js"],"sourcesContent":["/**\r\n * API Testing Utility\r\n * \r\n * This utility provides functions to test API endpoints and diagnose connection issues.\r\n */\r\n\r\n/**\r\n * Tests an API endpoint with various configurations\r\n * @param {string} endpoint - The API endpoint to test\r\n * @param {Object} options - Test options\r\n * @returns {Promise<Object>} - Test results\r\n */\r\nexport const testApiEndpoint = async (endpoint, options = {}) => {\r\n  const {\r\n    method = 'GET',\r\n    token = null,\r\n    body = null,\r\n    baseUrls = [\r\n      '', // Relative URL (uses Next.js API routes)\r\n      'http://localhost:5000', // Direct backend URL\r\n      process.env.NEXT_PUBLIC_API_URL || '' // Environment variable URL\r\n    ],\r\n    timeout = 5000,\r\n    includeCredentials = true\r\n  } = options;\r\n  \r\n  const results = [];\r\n  \r\n  // Test each base URL\r\n  for (const baseUrl of baseUrls) {\r\n    if (!baseUrl && baseUrls.length > 1) continue; // Skip empty base URL if we have alternatives\r\n    \r\n    const fullUrl = `${baseUrl}${endpoint}`;\r\n    const result = {\r\n      url: fullUrl,\r\n      success: false,\r\n      status: null,\r\n      statusText: null,\r\n      timing: null,\r\n      error: null,\r\n      data: null\r\n    };\r\n    \r\n    try {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n      \r\n      const startTime = performance.now();\r\n      \r\n      const fetchOptions = {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        },\r\n        ...(body ? { body: JSON.stringify(body) } : {}),\r\n        ...(includeCredentials ? { credentials: 'include' } : {}),\r\n        signal: controller.signal\r\n      };\r\n      \r\n      const response = await fetch(fullUrl, fetchOptions);\r\n      clearTimeout(timeoutId);\r\n      \r\n      const endTime = performance.now();\r\n      result.timing = `${(endTime - startTime).toFixed(2)}ms`;\r\n      \r\n      result.status = response.status;\r\n      result.statusText = response.statusText;\r\n      \r\n      // Try to parse response as JSON\r\n      try {\r\n        result.data = await response.json();\r\n      } catch (e) {\r\n        // If not JSON, get text\r\n        result.data = await response.text();\r\n      }\r\n      \r\n      result.success = response.ok;\r\n    } catch (error) {\r\n      result.error = error.name === 'AbortError' \r\n        ? `Request timed out after ${timeout}ms` \r\n        : error.message;\r\n    }\r\n    \r\n    results.push(result);\r\n  }\r\n  \r\n  return results;\r\n};\r\n\r\n/**\r\n * Tests all critical API endpoints and returns results\r\n * @param {string} token - JWT token for authenticated requests\r\n * @returns {Promise<Object>} - Test results for all endpoints\r\n */\r\nexport const testAllEndpoints = async (token = null) => {\r\n  const endpoints = [\r\n    { path: '/api/users/profile', method: 'GET', requiresAuth: true },\r\n    { path: '/api/auth/login', method: 'POST', requiresAuth: false, body: { email: 'test@example.com', password: 'password' } },\r\n    { path: '/api/auth/refresh', method: 'POST', requiresAuth: false, body: { token } }\r\n  ];\r\n  \r\n  const results = {};\r\n  \r\n  for (const endpoint of endpoints) {\r\n    const options = {\r\n      method: endpoint.method,\r\n      ...(endpoint.requiresAuth && token ? { token } : {}),\r\n      ...(endpoint.body ? { body: endpoint.body } : {})\r\n    };\r\n    \r\n    results[endpoint.path] = await testApiEndpoint(endpoint.path, options);\r\n  }\r\n  \r\n  return results;\r\n};\r\n\r\n/**\r\n * Logs API test results to console in a formatted way\r\n * @param {Object} results - Results from testAllEndpoints\r\n */\r\nexport const logApiTestResults = (results) => {\r\n  console.group('🔌 API Connection Test Results');\r\n  \r\n  for (const [endpoint, tests] of Object.entries(results)) {\r\n    console.group(`Endpoint: ${endpoint}`);\r\n    \r\n    tests.forEach((test, index) => {\r\n      console.group(`Test ${index + 1}: ${test.url}`);\r\n      console.log(`Status: ${test.status || 'N/A'} ${test.statusText || ''}`);\r\n      console.log(`Success: ${test.success}`);\r\n      console.log(`Timing: ${test.timing || 'N/A'}`);\r\n      \r\n      if (test.error) {\r\n        console.error(`Error: ${test.error}`);\r\n      }\r\n      \r\n      if (test.data) {\r\n        console.log('Response data:', test.data);\r\n      }\r\n      \r\n      console.groupEnd();\r\n    });\r\n    \r\n    console.groupEnd();\r\n  }\r\n  \r\n  console.groupEnd();\r\n};\r\n\r\n/**\r\n * Run and log API tests in one step\r\n * @param {string} token - JWT token for authenticated requests\r\n * @returns {Promise<Object>} - Test results\r\n */\r\nexport const runApiTests = async (token = null) => {\r\n  const results = await testAllEndpoints(token);\r\n  logApiTestResults(results);\r\n  return results;\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/components/AuthDiagnosticTool.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { diagnoseAuthIssues, validateToken } from '../utils/authDiagnostics';\r\nimport { runApiTests } from '../utils/apiTester';\r\n\r\n/**\r\n * A diagnostic tool component that helps debug authentication issues\r\n * Can be added to any page where authentication debugging is needed\r\n */\r\nconst AuthDiagnosticTool = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [results, setResults] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isApiTesting, setIsApiTesting] = useState(false);\r\n  const [apiTestResults, setApiTestResults] = useState(null);\r\n  const [manualToken, setManualToken] = useState('');\r\n  const [tokenValidation, setTokenValidation] = useState(null);\r\n\r\n  const runDiagnostics = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const diagnosticResults = await diagnoseAuthIssues();\r\n      setResults(diagnosticResults);\r\n    } catch (error) {\r\n      console.error('Error running diagnostics:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  const testApiConnections = async () => {\r\n    setIsApiTesting(true);\r\n    try {\r\n      // Get token from localStorage if available\r\n      let token = null;\r\n      try {\r\n        const user = JSON.parse(localStorage.getItem('user'));\r\n        if (user && user.token) {\r\n          token = user.token;\r\n        }\r\n      } catch (e) {\r\n        console.error('Error getting token from localStorage:', e);\r\n      }\r\n      \r\n      const results = await runApiTests(token);\r\n      setApiTestResults(results);\r\n    } catch (error) {\r\n      console.error('Error testing API connections:', error);\r\n    } finally {\r\n      setIsApiTesting(false);\r\n    }\r\n  };\r\n\r\n  const validateManualToken = () => {\r\n    if (!manualToken.trim()) {\r\n      setTokenValidation({ valid: false, error: 'No token provided' });\r\n      return;\r\n    }\r\n\r\n    const validation = validateToken(manualToken);\r\n    setTokenValidation(validation);\r\n  };\r\n\r\n  const clearLocalStorage = () => {\r\n    localStorage.removeItem('user');\r\n    alert('Local storage cleared. You will need to log in again.');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  if (!isOpen) {\r\n    return (\r\n      <button \r\n        onClick={() => setIsOpen(true)}\r\n        className=\"fixed bottom-4 right-4 bg-gray-800 text-white p-2 rounded-full shadow-lg z-50 opacity-70 hover:opacity-100 transition-opacity\"\r\n        title=\"Auth Diagnostics\"\r\n      >\r\n        🔍\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-auto\">\r\n        <div className=\"sticky top-0 bg-gray-100 p-4 border-b flex justify-between items-center\">\r\n          <h2 className=\"text-xl font-bold\">Authentication Diagnostic Tool</h2>\r\n          <button \r\n            onClick={() => setIsOpen(false)}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"p-6 space-y-6\">\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold\">Run Diagnostics</h3>\r\n            <p className=\"text-gray-600\">This will check your authentication status, token validity, and API connectivity.</p>\r\n            <div className=\"flex space-x-4\">\r\n              <button\r\n                onClick={runDiagnostics}\r\n                disabled={isLoading}\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50\"\r\n              >\r\n                {isLoading ? 'Running...' : 'Run Auth Diagnostics'}\r\n              </button>\r\n              \r\n              <button\r\n                onClick={testApiConnections}\r\n                disabled={isApiTesting}\r\n                className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded disabled:opacity-50\"\r\n              >\r\n                {isApiTesting ? 'Testing...' : 'Test API Connections'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {apiTestResults && (\r\n            <div className=\"border rounded-lg p-4 bg-gray-50 space-y-4\">\r\n              <h3 className=\"text-lg font-semibold\">API Test Results</h3>\r\n              \r\n              {Object.entries(apiTestResults).map(([endpoint, tests]) => (\r\n                <div key={endpoint} className=\"mb-4\">\r\n                  <h4 className=\"font-medium\">{endpoint}</h4>\r\n                  \r\n                  {tests.map((test, index) => (\r\n                    <div key={index} className=\"mb-2 bg-white p-2 rounded border\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"font-medium\">{test.url}</span>\r\n                        <span className={`px-2 py-0.5 rounded text-sm ${test.success ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                          {test.status || 'Failed'} {test.statusText || ''}\r\n                        </span>\r\n                      </div>\r\n                      {test.error && (\r\n                        <div className=\"text-red-600 text-sm mt-1\">{test.error}</div>\r\n                      )}\r\n                      <div className=\"text-gray-500 text-sm\">Response time: {test.timing || 'N/A'}</div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          {results && (\r\n            <div className=\"border rounded-lg p-4 bg-gray-50 space-y-4\">\r\n              <h3 className=\"text-lg font-semibold\">Results</h3>\r\n              \r\n              <div>\r\n                <h4 className=\"font-medium\">Environment</h4>\r\n                <div className=\"bg-white p-2 rounded border overflow-x-auto\">\r\n                  <pre className=\"text-sm\">{JSON.stringify(results.environment, null, 2)}</pre>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <h4 className=\"font-medium\">LocalStorage User</h4>\r\n                <div className=\"bg-white p-2 rounded border overflow-x-auto\">\r\n                  <pre className=\"text-sm\">{JSON.stringify(results.localStorage, null, 2)}</pre>\r\n                </div>\r\n              </div>\r\n              \r\n              {results.tokenValidation && results.tokenValidation.valid !== undefined && (\r\n                <div>\r\n                  <h4 className=\"font-medium\">Token Validation</h4>\r\n                  <div className={`p-2 rounded border ${results.tokenValidation.valid ? 'bg-green-50' : 'bg-red-50'}`}>\r\n                    {results.tokenValidation.valid ? (\r\n                      <div className=\"text-green-700\">✓ Token is valid</div>\r\n                    ) : (\r\n                      <div className=\"text-red-700\">✗ {results.tokenValidation.error}</div>\r\n                    )}\r\n                    <pre className=\"text-sm mt-2 bg-white p-2 rounded\">{JSON.stringify(results.tokenValidation, null, 2)}</pre>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              <div>\r\n                <h4 className=\"font-medium\">API Tests</h4>\r\n                {results.apiTests.map((test, index) => (\r\n                  <div key={index} className=\"mb-2 bg-white p-2 rounded border\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"font-medium\">{test.endpoint}</span>\r\n                      <span className={`px-2 py-0.5 rounded text-sm ${test.success ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                        {test.status} {test.statusText}\r\n                      </span>\r\n                    </div>\r\n                    {test.error && (\r\n                      <div className=\"text-red-600 text-sm mt-1\">{test.error}</div>\r\n                    )}\r\n                    <div className=\"text-gray-500 text-sm\">Response time: {test.timing.total}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"border-t pt-4\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Manual Token Validation</h3>\r\n            <div className=\"space-y-2\">\r\n              <textarea\r\n                value={manualToken}\r\n                onChange={(e) => setManualToken(e.target.value)}\r\n                placeholder=\"Paste JWT token here\"\r\n                className=\"w-full p-2 border rounded h-24\"\r\n              />\r\n              <button\r\n                onClick={validateManualToken}\r\n                className=\"bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded\"\r\n              >\r\n                Validate Token\r\n              </button>\r\n            </div>\r\n            \r\n            {tokenValidation && (\r\n              <div className={`mt-4 p-3 rounded ${tokenValidation.valid ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>\r\n                {tokenValidation.valid ? (\r\n                  <div>\r\n                    <div className=\"text-green-700 font-medium\">✓ Token is valid</div>\r\n                    <div className=\"text-sm mt-1\">Expires: {tokenValidation.expiresAt}</div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-red-700\">\r\n                    ✗ {tokenValidation.error}\r\n                    {tokenValidation.expiredAt && (\r\n                      <div className=\"text-sm mt-1\">\r\n                        Expired at: {tokenValidation.expiredAt}<br />\r\n                        Current time: {tokenValidation.currentTime}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"border-t pt-4\">\r\n            <h3 className=\"text-lg font-semibold mb-2\">Troubleshooting Actions</h3>\r\n            <div className=\"space-y-2\">\r\n              <button\r\n                onClick={clearLocalStorage}\r\n                className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded\"\r\n              >\r\n                Clear Auth Data & Redirect to Login\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthDiagnosticTool;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 994, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/components/ClientOnly.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\n/**\r\n * A wrapper component that only renders its children on the client side\r\n * This prevents hydration mismatches for components that use browser-only APIs\r\n * or need to display dynamic content that differs between server and client\r\n * \r\n * @param {Object} props - Component props\r\n * @param {React.ReactNode} props.children - The content to render client-side only\r\n * @param {React.ReactNode} props.fallback - Optional fallback to show during SSR (default: null)\r\n */\r\nexport default function ClientOnly({ children, fallback = null }) {\r\n  const [isClient, setIsClient] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n  }, []);\r\n\r\n  // On the server or during initial hydration, render fallback (or nothing)\r\n  if (!isClient) {\r\n    return fallback;\r\n  }\r\n\r\n  // On the client, render children normally\r\n  return children;\r\n}"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAae,SAAS,WAAW,KAA6B;QAA7B,EAAE,QAAQ,EAAE,WAAW,IAAI,EAAE,GAA7B;;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;gCAAC;YACR,YAAY;QACd;+BAAG,EAAE;IAEL,0EAA0E;IAC1E,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,0CAA0C;IAC1C,OAAO;AACT;GAdwB;KAAA","debugId":null}},
    {"offset": {"line": 1029, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/lib/dateUtils.js"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\n\r\n/**\r\n * Utility functions for consistent date and time formatting across the application\r\n * Designed to prevent hydration mismatches between server and client rendering\r\n */\r\n\r\n/**\r\n * Format a date to a consistent locale string\r\n * @param {Date|string|number} date - Date object, ISO string, or timestamp\r\n * @returns {string} Formatted date string\r\n */\r\nexport function formatDate(date) {\r\n  // Use a consistent locale and format options\r\n  const options = { \r\n    year: 'numeric', \r\n    month: 'short', \r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  };\r\n  return formatWithOptions(date, options);\r\n}\r\n\r\n/**\r\n * Format a date to show only time\r\n * @param {Date|string|number} date - Date object, ISO string, or timestamp\r\n * @returns {string} Formatted time string\r\n */\r\nexport function formatTime(date) {\r\n  // Use a consistent locale and format options for time only\r\n  const options = { \r\n    hour: '2-digit', \r\n    minute: '2-digit',\r\n    hour12: true\r\n  };\r\n  return formatWithOptions(date, options).toUpperCase(); // Ensure consistent casing\r\n}\r\n\r\n/**\r\n * Format a date with specific options\r\n * @param {Date|string|number} date - Date object, ISO string, or timestamp\r\n * @param {Object} options - Intl.DateTimeFormat options\r\n * @returns {string} Formatted date string\r\n */\r\nexport function formatWithOptions(date, options) {\r\n  if (!date) return '—';\r\n  \r\n  try {\r\n    // Ensure we have a Date object\r\n    const dateObj = date instanceof Date ? date : new Date(date);\r\n    // Use a consistent locale\r\n    return dateObj.toLocaleString('en-US', options);\r\n  } catch (error) {\r\n    console.error('Error formatting date:', error);\r\n    return '—';\r\n  }\r\n}\r\n\r\n/**\r\n * Client-side only component for displaying the current time\r\n * Use this component when you need to display the current time\r\n * and want to avoid hydration mismatches\r\n */\r\nexport function ClientTime({ format = 'time' }) {\r\n  const [formattedTime, setFormattedTime] = React.useState('—');\r\n  \r\n  React.useEffect(() => {\r\n    // Update on mount\r\n    updateTime();\r\n    \r\n    // Set up interval to update time\r\n    const intervalId = setInterval(updateTime, 60000); // Update every minute\r\n    \r\n    // Clean up interval\r\n    return () => clearInterval(intervalId);\r\n    \r\n    function updateTime() {\r\n      const now = new Date();\r\n      if (format === 'time') {\r\n        setFormattedTime(formatTime(now));\r\n      } else if (format === 'date') {\r\n        setFormattedTime(formatDate(now));\r\n      } else {\r\n        setFormattedTime(formatWithOptions(now, format));\r\n      }\r\n    }\r\n  }, [format]);\r\n  \r\n  return formattedTime;\r\n}"],"names":[],"mappings":";;;;;;;;;;AAEA;;AAFA;;AAcO,SAAS,WAAW,IAAI;IAC7B,6CAA6C;IAC7C,MAAM,UAAU;QACd,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACV;IACA,OAAO,kBAAkB,MAAM;AACjC;AAOO,SAAS,WAAW,IAAI;IAC7B,2DAA2D;IAC3D,MAAM,UAAU;QACd,MAAM;QACN,QAAQ;QACR,QAAQ;IACV;IACA,OAAO,kBAAkB,MAAM,SAAS,WAAW,IAAI,2BAA2B;AACpF;AAQO,SAAS,kBAAkB,IAAI,EAAE,OAAO;IAC7C,IAAI,CAAC,MAAM,OAAO;IAElB,IAAI;QACF,+BAA+B;QAC/B,MAAM,UAAU,gBAAgB,OAAO,OAAO,IAAI,KAAK;QACvD,0BAA0B;QAC1B,OAAO,QAAQ,cAAc,CAAC,SAAS;IACzC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;IACT;AACF;AAOO,SAAS,WAAW,KAAmB;QAAnB,EAAE,SAAS,MAAM,EAAE,GAAnB;;IACzB,MAAM,CAAC,eAAe,iBAAiB,GAAG,wKAAK,CAAC,QAAQ,CAAC;IAEzD,wKAAK,CAAC,SAAS;gCAAC;YACd,kBAAkB;YAClB;YAEA,iCAAiC;YACjC,MAAM,aAAa,YAAY,YAAY,QAAQ,sBAAsB;YAEzE,oBAAoB;YACpB;wCAAO,IAAM,cAAc;;;;YAE3B,SAAS;gBACP,MAAM,MAAM,IAAI;gBAChB,IAAI,WAAW,QAAQ;oBACrB,iBAAiB,WAAW;gBAC9B,OAAO,IAAI,WAAW,QAAQ;oBAC5B,iBAAiB,WAAW;gBAC9B,OAAO;oBACL,iBAAiB,kBAAkB,KAAK;gBAC1C;YACF;QACF;+BAAG;QAAC;KAAO;IAEX,OAAO;AACT;GA1BgB;KAAA","debugId":null}},
    {"offset": {"line": 1118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/components/FormattedTime.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport ClientOnly from './ClientOnly';\r\nimport { formatTime, formatDate } from '../lib/dateUtils';\r\n\r\n/**\r\n * A component for displaying formatted time with proper hydration handling\r\n * Renders a placeholder during SSR and updates with the correct time on the client\r\n * \r\n * @param {Object} props - Component props\r\n * @param {string|Date} props.time - The time to format (ISO string, timestamp, or Date object)\r\n * @param {string} props.format - Format to use: 'time' or 'date' (default: 'time')\r\n * @param {string} props.className - Optional CSS class name\r\n */\r\nexport default function FormattedTime({ time, format = 'time', className = '' }) {\r\n  // Use a placeholder for SSR to avoid hydration mismatch\r\n  const [formattedValue, setFormattedValue] = useState('—');\r\n  \r\n  useEffect(() => {\r\n    // Update the formatted value on the client side only\r\n    if (time) {\r\n      try {\r\n        if (format === 'time') {\r\n          setFormattedValue(formatTime(time));\r\n        } else if (format === 'date') {\r\n          setFormattedValue(formatDate(time));\r\n        }\r\n      } catch (error) {\r\n        console.error('Error formatting time:', error);\r\n        setFormattedValue('—');\r\n      }\r\n    }\r\n  }, [time, format]);\r\n  \r\n  return (\r\n    <ClientOnly fallback={<span className={className}>—</span>}>\r\n      <span className={className}>{formattedValue}</span>\r\n    </ClientOnly>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAee,SAAS,cAAc,KAAyC;QAAzC,EAAE,IAAI,EAAE,SAAS,MAAM,EAAE,YAAY,EAAE,EAAE,GAAzC;;IACpC,wDAAwD;IACxD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IAErD,IAAA,0KAAS;mCAAC;YACR,qDAAqD;YACrD,IAAI,MAAM;gBACR,IAAI;oBACF,IAAI,WAAW,QAAQ;wBACrB,kBAAkB,IAAA,wIAAU,EAAC;oBAC/B,OAAO,IAAI,WAAW,QAAQ;wBAC5B,kBAAkB,IAAA,wIAAU,EAAC;oBAC/B;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,0BAA0B;oBACxC,kBAAkB;gBACpB;YACF;QACF;kCAAG;QAAC;QAAM;KAAO;IAEjB,qBACE,6LAAC,8IAAU;QAAC,wBAAU,6LAAC;YAAK,WAAW;sBAAW;;;;;;kBAChD,cAAA,6LAAC;YAAK,WAAW;sBAAY;;;;;;;;;;;AAGnC;GAzBwB;KAAA","debugId":null}},
    {"offset": {"line": 1191, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/components/NotificationCard.jsx"],"sourcesContent":["import Link from 'next/link';\r\nimport FormattedTime from '../../components/FormattedTime';\r\n\r\nfunction severityClasses(sev = '') {\r\n  const k = String(sev).toLowerCase();\r\n  if (k === 'extreme') return 'bg-red-100 text-red-800 border-red-200';\r\n  if (k === 'severe')  return 'bg-orange-100 text-orange-800 border-orange-200';\r\n  if (k === 'moderate')return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n  if (k === 'minor')   return 'bg-green-100 text-green-800 border-green-200';\r\n  return 'bg-orange-100 text-orange-800 border-orange-200'; // default to Severe styling\r\n}\r\n\r\nexport default function NotificationCard({ alert }) {\r\n  const isExternal = alert.link && /^https?:\\/\\//i.test(alert.link);\r\n\r\n  const internalHref =\r\n    alert.kind === 'earthquake' ? `/earthquakes/${alert.id}` :\r\n    alert.kind === 'flood'      ? `/floods/${alert.id}` :\r\n    (alert.kind === 'cap' && alert.identifier) ? `/alerts/cap/${encodeURIComponent(alert.identifier)}` :\r\n    null;\r\n\r\n  const Wrapper = ({children}) => {\r\n    const base =\r\n      \"block rounded-lg border p-2 bg-white hover:bg-gray-50 transition shadow-sm\";\r\n    if (isExternal) {\r\n      return (\r\n        <a href={alert.link} target=\"_blank\" rel=\"noopener noreferrer\" className={base}>\r\n          {children}\r\n        </a>\r\n      );\r\n    }\r\n    if (internalHref) {\r\n      return (\r\n        <Link href={internalHref} className={base} prefetch>\r\n          {children}\r\n        </Link>\r\n      );\r\n    }\r\n    return <div className={base}>{children}</div>;\r\n  };\r\n\r\n  const sevClass = severityClasses(alert.severity);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"flex items-start justify-between gap-2\">\r\n        <strong className=\"font-semibold text-xs leading-5 text-gray-900 line-clamp-2\">\r\n          {alert.title}\r\n        </strong>\r\n        <span className={`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] border ${sevClass}`}>\r\n          {alert.severity || 'Severe'}\r\n        </span>\r\n      </div>\r\n      <div className=\"mt-1 flex items-center gap-2 text-[11px] text-gray-700\">\r\n        <time className=\"whitespace-nowrap\">\r\n          <FormattedTime time={alert.time} format=\"date\" />\r\n        </time>\r\n        <span>•</span>\r\n        <span className=\"truncate\">📍 {alert.location || '—'}</span>\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,SAAS;QAAgB,MAAA,iEAAM;IAC7B,MAAM,IAAI,OAAO,KAAK,WAAW;IACjC,IAAI,MAAM,WAAW,OAAO;IAC5B,IAAI,MAAM,UAAW,OAAO;IAC5B,IAAI,MAAM,YAAW,OAAO;IAC5B,IAAI,MAAM,SAAW,OAAO;IAC5B,OAAO,mDAAmD,4BAA4B;AACxF;AAEe,SAAS,iBAAiB,KAAS;QAAT,EAAE,KAAK,EAAE,GAAT;IACvC,MAAM,aAAa,MAAM,IAAI,IAAI,gBAAgB,IAAI,CAAC,MAAM,IAAI;IAEhE,MAAM,eACJ,MAAM,IAAI,KAAK,eAAe,AAAC,gBAAwB,OAAT,MAAM,EAAE,IACtD,MAAM,IAAI,KAAK,UAAe,AAAC,WAAmB,OAAT,MAAM,EAAE,IACjD,AAAC,MAAM,IAAI,KAAK,SAAS,MAAM,UAAU,GAAI,AAAC,eAAmD,OAArC,mBAAmB,MAAM,UAAU,KAC/F;IAEF,MAAM,UAAU;YAAC,EAAC,QAAQ,EAAC;QACzB,MAAM,OACJ;QACF,IAAI,YAAY;YACd,qBACE,6LAAC;gBAAE,MAAM,MAAM,IAAI;gBAAE,QAAO;gBAAS,KAAI;gBAAsB,WAAW;0BACvE;;;;;;QAGP;QACA,IAAI,cAAc;YAChB,qBACE,6LAAC,0KAAI;gBAAC,MAAM;gBAAc,WAAW;gBAAM,QAAQ;0BAChD;;;;;;QAGP;QACA,qBAAO,6LAAC;YAAI,WAAW;sBAAO;;;;;;IAChC;IAEA,MAAM,WAAW,gBAAgB,MAAM,QAAQ;IAE/C,qBACE,6LAAC;;0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,WAAU;kCACf,MAAM,KAAK;;;;;;kCAEd,6LAAC;wBAAK,WAAW,AAAC,wEAAgF,OAAT;kCACtF,MAAM,QAAQ,IAAI;;;;;;;;;;;;0BAGvB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCACd,cAAA,6LAAC,iJAAa;4BAAC,MAAM,MAAM,IAAI;4BAAE,QAAO;;;;;;;;;;;kCAE1C,6LAAC;kCAAK;;;;;;kCACN,6LAAC;wBAAK,WAAU;;4BAAW;4BAAI,MAAM,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;AAIzD;KAlDwB","debugId":null}},
    {"offset": {"line": 1338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/components/NotificationsList.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport NotificationCard from './NotificationCard';\r\n\r\nexport default function NotificationsList() {\r\n  const [items, setItems] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    const load = async () => {\r\n      try {\r\n        const res = await fetch('/api/alerts', { cache: 'no-store' });\r\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n        const json = await res.json();\r\n        if (active) setItems((json.items || []));\r\n      } catch (err) {\r\n        if (active) setError(err.message || 'Failed to load alerts');\r\n      }\r\n    };\r\n\r\n    load();\r\n    const iv = setInterval(load, 60000);\r\n    return () => { active = false; clearInterval(iv); };\r\n  }, []);\r\n\r\n  if (error) return <p className=\"text-sm text-red-600\">Error: {error}</p>;\r\n\r\n  if (items === null) {\r\n    return (\r\n      <div className=\"overflow-x-auto pb-1\">\r\n        <div className=\"flex gap-3\">\r\n          {Array.from({ length: 3 }).map((_, i) => (\r\n            <div key={i} className=\"w-72 h-16 animate-pulse rounded-lg bg-gray-100 flex-none\" />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!items.length) return <p className=\"text-sm text-gray-500\">No recent alerts.</p>;\r\n\r\n  // Single horizontal row, scrollable; compact cards with fixed width\r\n  return (\r\n    <div className=\"overflow-x-auto pb-1 [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n         style={{ WebkitOverflowScrolling: 'touch' }}>\r\n      <div className=\"flex gap-3 flex-nowrap\">\r\n        {items.map(a => (\r\n          <div key={a.uid || `${a.kind}-${a.id}`} className=\"w-72 flex-none\">\r\n            <NotificationCard alert={a} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,IAAA,0KAAS;uCAAC;YACR,IAAI,SAAS;YACb,MAAM;oDAAO;oBACX,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM,eAAe;4BAAE,OAAO;wBAAW;wBAC3D,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,AAAC,QAAkB,OAAX,IAAI,MAAM;wBAC/C,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,IAAI,QAAQ,SAAU,KAAK,KAAK,IAAI,EAAE;oBACxC,EAAE,OAAO,KAAK;wBACZ,IAAI,QAAQ,SAAS,IAAI,OAAO,IAAI;oBACtC;gBACF;;YAEA;YACA,MAAM,KAAK,YAAY,MAAM;YAC7B;+CAAO;oBAAQ,SAAS;oBAAO,cAAc;gBAAK;;QACpD;sCAAG,EAAE;IAEL,IAAI,OAAO,qBAAO,6LAAC;QAAE,WAAU;;YAAuB;YAAQ;;;;;;;IAE9D,IAAI,UAAU,MAAM;QAClB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BACZ,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACjC,6LAAC;wBAAY,WAAU;uBAAb;;;;;;;;;;;;;;;IAKpB;IAEA,IAAI,CAAC,MAAM,MAAM,EAAE,qBAAO,6LAAC;QAAE,WAAU;kBAAwB;;;;;;IAE/D,oEAAoE;IACpE,qBACE,6LAAC;QAAI,WAAU;QACV,OAAO;YAAE,yBAAyB;QAAQ;kBAC7C,cAAA,6LAAC;YAAI,WAAU;sBACZ,MAAM,GAAG,CAAC,CAAA,kBACT,6LAAC;oBAAuC,WAAU;8BAChD,cAAA,6LAAC,2JAAgB;wBAAC,OAAO;;;;;;mBADjB,EAAE,GAAG,IAAI,AAAC,GAAY,OAAV,EAAE,IAAI,EAAC,KAAQ,OAAL,EAAE,EAAE;;;;;;;;;;;;;;;AAO9C;GAnDwB;KAAA","debugId":null}},
    {"offset": {"line": 1469, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/components/DashboardHeader.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  ShieldAlert,\r\n  MessageSquare,\r\n  Clapperboard,\r\n  Trophy,\r\n  Info,\r\n  UserRound,\r\n  ChevronDown,\r\n  User,\r\n  Settings,\r\n  LogOut,\r\n  Phone,\r\n} from 'lucide-react';\r\n\r\nimport {useAuth} from \"../context/AuthContext\";\r\n\r\nconst HELPLINES = [\r\n  { service: 'General Emergency (all services)', numbers: ['112'] },\r\n  { service: 'Police', numbers: ['100'] },\r\n  { service: 'Fire Service', numbers: ['101'] },\r\n  { service: 'Ambulance', numbers: ['102'] },\r\n  { service: 'NDMA (National Disaster Mgmt Auth)', numbers: ['1078', '011-26701728'] },\r\n  { service: 'NDRF (National Disaster Response F)', numbers: ['011-24363260', '9711077372'] },\r\n  { service: 'Relief Commissioner for Natural Calamities', numbers: ['1070'] },\r\n  { service: 'Medical State Helplines', numbers: ['108'] },\r\n  { service: 'Children Helpline', numbers: ['1098'] },\r\n  { service: 'Women Helpline', numbers: ['1091', '181'] },\r\n  { service: 'Missing Children & Women’s Affairs', numbers: ['1094'] },\r\n  { service: 'SOS to Earthquake/Flood/Disaster', numbers: ['1092'] },\r\n];\r\n\r\nconst DashboardHeader = () => {\r\n  const [profileOpen, setProfileOpen] = useState(false);\r\n  const [helpOpen, setHelpOpen] = useState(false);\r\n  const {logout} = useAuth();\r\n\r\n  const profileMenuRef = useRef(null);\r\n  const profileBtnRef = useRef(null);\r\n  const helpMenuRef = useRef(null);\r\n  const helpBtnRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    function onClickOutside(e) {\r\n      const t = e.target;\r\n      const clickedProfile =\r\n        profileMenuRef.current?.contains(t) || profileBtnRef.current?.contains(t);\r\n      const clickedHelp =\r\n        helpMenuRef.current?.contains(t) || helpBtnRef.current?.contains(t);\r\n\r\n      if (!clickedProfile) setProfileOpen(false);\r\n      if (!clickedHelp) setHelpOpen(false);\r\n    }\r\n    function onEsc(e) {\r\n      if (e.key === 'Escape') {\r\n        setProfileOpen(false);\r\n        setHelpOpen(false);\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', onClickOutside);\r\n    document.addEventListener('keydown', onEsc);\r\n    return () => {\r\n      document.removeEventListener('mousedown', onClickOutside);\r\n      document.removeEventListener('keydown', onEsc);\r\n    };\r\n  }, []);\r\n\r\n  const navLink =\r\n    'text-white hover:bg-blue-600 hover:bg-opacity-75 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 inline-flex items-center gap-2';\r\n\r\n  const telHref = (num) => `tel:${num.replace(/\\s+/g, '')}`;\r\n\r\n  return (\r\n    <nav className=\"bg-gradient-to-r from-blue-700 to-indigo-800 shadow-lg sticky top-0 z-50\">\r\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between items-center h-16\">\r\n          {/* Logo */}\r\n          <div className=\"flex items-center\">\r\n            <a href=\"/dashboard/student\" className=\"flex items-center gap-2\">\r\n              <ShieldAlert className=\"h-5 w-5 text-white\" aria-hidden=\"true\" />\r\n              <span className=\"text-white font-bold text-xl tracking-tight\">\r\n                Disaster Dashboard\r\n              </span>\r\n            </a>\r\n          </div>\r\n\r\n          {/* Nav links (desktop) */}\r\n          <div className=\"hidden md:flex items-center space-x-4\">\r\n            <a href=\"/dashboard/chatbot\" className={navLink}>\r\n              <MessageSquare className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n              Chatbot\r\n            </a>\r\n            <a href=\"/dashboard/student/reels\" className={navLink}>\r\n              <Clapperboard className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n              Shorts\r\n            </a>\r\n            <a href=\"/dashboard/student/leaderboard\" className={navLink}>\r\n              <Trophy className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n              LeaderBoard\r\n            </a>\r\n\r\n            {/* Emergency Contact dropdown */}\r\n            <div className=\"relative\" ref={helpMenuRef}>\r\n              <button\r\n                ref={helpBtnRef}\r\n                onClick={() => {\r\n                  setHelpOpen((v) => !v);\r\n                  setProfileOpen(false);\r\n                }}\r\n                className=\"flex items-center gap-2 text-white bg-white/0 hover:bg-blue-600 hover:bg-opacity-75 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200\"\r\n                aria-haspopup=\"menu\"\r\n                aria-expanded={helpOpen}\r\n              >\r\n                <Phone className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n                Emergency Contact\r\n                <ChevronDown\r\n                  className={`h-4 w-4 transition-transform ${helpOpen ? 'rotate-180' : ''}`}\r\n                  aria-hidden=\"true\"\r\n                />\r\n              </button>\r\n\r\n              {helpOpen && (\r\n                <div\r\n                  role=\"menu\"\r\n                  aria-label=\"Emergency contacts\"\r\n                  className=\"absolute right-0 mt-2 w-[26rem] max-w-[90vw] origin-top-right rounded-md bg-white shadow-xl ring-1 ring-black/5 focus:outline-none overflow-hidden\"\r\n                >\r\n                  {/* Header - tighter padding */}\r\n                  <div className=\"px-3 py-2 bg-gray-50 border-b text-sm font-semibold text-gray-700\">\r\n                    🇮🇳 Emergency & Disaster Helplines\r\n                  </div>\r\n\r\n                  {/* List */}\r\n                  <div className=\"max-h-96 overflow-y-auto\">\r\n                    <ul className=\"divide-y\">\r\n                      {HELPLINES.map((h, idx) => {\r\n                        const firstFour = idx < 4;\r\n                        return (\r\n                          <li key={h.service} className=\"px-3 py-2\">\r\n                            {firstFour ? (\r\n                              // Compact single-row layout for first 4 items\r\n                              <div className=\"flex items-center justify-between gap-3\">\r\n                                <div className=\"text-sm font-medium text-gray-900 truncate\">\r\n                                  {h.service}\r\n                                </div>\r\n                                <div className=\"flex flex-wrap items-center gap-1.5 justify-end\">\r\n                                  {h.numbers.map((n) => (\r\n                                    <a\r\n                                      key={n}\r\n                                      href={telHref(n)}\r\n                                      className=\"inline-flex items-center rounded-md border border-gray-200 px-1.5 py-[2px] text-[11px] font-mono text-blue-800 hover:bg-blue-100 bg-blue-50\"\r\n                                      title={`Call ${n}`}\r\n                                    >\r\n                                      {n}\r\n                                    </a>\r\n                                  ))}\r\n                                </div>\r\n                              </div>\r\n                            ) : (\r\n                              // Default stacked layout for the rest\r\n                              <>\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                  {h.service}\r\n                                </div>\r\n                                <div className=\"mt-1 flex flex-wrap gap-1.5\">\r\n                                  {h.numbers.map((n) => (\r\n                                    <a\r\n                                      key={n}\r\n                                      href={telHref(n)}\r\n                                      className=\"inline-flex items-center rounded-md border border-gray-200 px-1.5 py-[2px] text-[11px] font-mono text-blue-800 hover:bg-blue-100 bg-blue-50\"\r\n                                      title={`Call ${n}`}\r\n                                    >\r\n                                      {n}\r\n                                    </a>\r\n                                  ))}\r\n                                </div>\r\n                              </>\r\n                            )}\r\n                          </li>\r\n                        );\r\n                      })}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <a href=\"/dashboard/about\" className={navLink}>\r\n              <Info className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n              About\r\n            </a>\r\n\r\n            {/* Profile dropdown */}\r\n            <div className=\"relative\" ref={profileMenuRef}>\r\n              <button\r\n                ref={profileBtnRef}\r\n                onClick={() => {\r\n                  setProfileOpen((v) => !v);\r\n                  setHelpOpen(false);\r\n                }}\r\n                className=\"flex items-center gap-2 text-white bg-white/0 hover:bg-blue-600 hover:bg-opacity-75 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200\"\r\n                aria-haspopup=\"menu\"\r\n                aria-expanded={profileOpen}\r\n              >\r\n                <UserRound className=\"h-5 w-5 text-white\" aria-hidden=\"true\" />\r\n                <span>Profile</span>\r\n                <ChevronDown\r\n                  className={`h-4 w-4 transition-transform ${profileOpen ? 'rotate-180' : ''}`}\r\n                  aria-hidden=\"true\"\r\n                />\r\n              </button>\r\n\r\n              {profileOpen && (\r\n                <div\r\n                  role=\"menu\"\r\n                  aria-label=\"Profile menu\"\r\n                  className=\"absolute right-0 mt-2 w-52 origin-top-right rounded-md bg-white shadow-xl ring-1 ring-black/5 focus:outline-none overflow-hidden\"\r\n                >\r\n                  <a\r\n                    href=\"/profile\"\r\n                    role=\"menuitem\"\r\n                    className=\"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\r\n                    onClick={() => setProfileOpen(false)}\r\n                  >\r\n                    <User className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n                    My Account\r\n                  </a>\r\n                  <a\r\n                    href=\"/dashboard/settings\"\r\n                    role=\"menuitem\"\r\n                    className=\"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\r\n                    onClick={() => setProfileOpen(false)}\r\n                  >\r\n                    <Settings className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n                    Settings\r\n                  </a>\r\n                  <div className=\"h-px bg-gray-200\" />\r\n                  <button\r\n                    onClick={logout}\r\n                    type=\"button\"\r\n                    role=\"menuitem\"\r\n                    className=\"w-full text-left flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-50\"\r\n                  >\r\n                    <LogOut className=\"h-4 w-4\" aria-hidden=\"true\" />\r\n                    Logout\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* (Optional) Mobile: add a hamburger later if needed */}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default DashboardHeader;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;;;AAjBA;;;;AAmBA,MAAM,YAAY;IAChB;QAAE,SAAS;QAAoC,SAAS;YAAC;SAAM;IAAC;IAChE;QAAE,SAAS;QAAU,SAAS;YAAC;SAAM;IAAC;IACtC;QAAE,SAAS;QAAgB,SAAS;YAAC;SAAM;IAAC;IAC5C;QAAE,SAAS;QAAa,SAAS;YAAC;SAAM;IAAC;IACzC;QAAE,SAAS;QAAsC,SAAS;YAAC;YAAQ;SAAe;IAAC;IACnF;QAAE,SAAS;QAAuC,SAAS;YAAC;YAAgB;SAAa;IAAC;IAC1F;QAAE,SAAS;QAA8C,SAAS;YAAC;SAAO;IAAC;IAC3E;QAAE,SAAS;QAA2B,SAAS;YAAC;SAAM;IAAC;IACvD;QAAE,SAAS;QAAqB,SAAS;YAAC;SAAO;IAAC;IAClD;QAAE,SAAS;QAAkB,SAAS;YAAC;YAAQ;SAAM;IAAC;IACtD;QAAE,SAAS;QAAsC,SAAS;YAAC;SAAO;IAAC;IACnE;QAAE,SAAS;QAAoC,SAAS;YAAC;SAAO;IAAC;CAClE;AAED,MAAM,kBAAkB;;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,EAAC,MAAM,EAAC,GAAG,IAAA,kJAAO;IAExB,MAAM,iBAAiB,IAAA,uKAAM,EAAC;IAC9B,MAAM,gBAAgB,IAAA,uKAAM,EAAC;IAC7B,MAAM,cAAc,IAAA,uKAAM,EAAC;IAC3B,MAAM,aAAa,IAAA,uKAAM,EAAC;IAE1B,IAAA,0KAAS;qCAAC;YACR,SAAS,eAAe,CAAC;oBAGrB,yBAAuC,wBAEvC,sBAAoC;gBAJtC,MAAM,IAAI,EAAE,MAAM;gBAClB,MAAM,iBACJ,EAAA,0BAAA,eAAe,OAAO,cAAtB,8CAAA,wBAAwB,QAAQ,CAAC,SAAM,yBAAA,cAAc,OAAO,cAArB,6CAAA,uBAAuB,QAAQ,CAAC;gBACzE,MAAM,cACJ,EAAA,uBAAA,YAAY,OAAO,cAAnB,2CAAA,qBAAqB,QAAQ,CAAC,SAAM,sBAAA,WAAW,OAAO,cAAlB,0CAAA,oBAAoB,QAAQ,CAAC;gBAEnE,IAAI,CAAC,gBAAgB,eAAe;gBACpC,IAAI,CAAC,aAAa,YAAY;YAChC;YACA,SAAS,MAAM,CAAC;gBACd,IAAI,EAAE,GAAG,KAAK,UAAU;oBACtB,eAAe;oBACf,YAAY;gBACd;YACF;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC,SAAS,gBAAgB,CAAC,WAAW;YACrC;6CAAO;oBACL,SAAS,mBAAmB,CAAC,aAAa;oBAC1C,SAAS,mBAAmB,CAAC,WAAW;gBAC1C;;QACF;oCAAG,EAAE;IAEL,MAAM,UACJ;IAEF,MAAM,UAAU,CAAC,MAAQ,AAAC,OAA8B,OAAxB,IAAI,OAAO,CAAC,QAAQ;IAEpD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,MAAK;4BAAqB,WAAU;;8CACrC,6LAAC,sOAAW;oCAAC,WAAU;oCAAqB,eAAY;;;;;;8CACxD,6LAAC;oCAAK,WAAU;8CAA8C;;;;;;;;;;;;;;;;;kCAOlE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,MAAK;gCAAqB,WAAW;;kDACtC,6LAAC,4OAAa;wCAAC,WAAU;wCAAU,eAAY;;;;;;oCAAS;;;;;;;0CAG1D,6LAAC;gCAAE,MAAK;gCAA2B,WAAW;;kDAC5C,6LAAC,qOAAY;wCAAC,WAAU;wCAAU,eAAY;;;;;;oCAAS;;;;;;;0CAGzD,6LAAC;gCAAE,MAAK;gCAAiC,WAAW;;kDAClD,6LAAC,mNAAM;wCAAC,WAAU;wCAAU,eAAY;;;;;;oCAAS;;;;;;;0CAKnD,6LAAC;gCAAI,WAAU;gCAAW,KAAK;;kDAC7B,6LAAC;wCACC,KAAK;wCACL,SAAS;4CACP,YAAY,CAAC,IAAM,CAAC;4CACpB,eAAe;wCACjB;wCACA,WAAU;wCACV,iBAAc;wCACd,iBAAe;;0DAEf,6LAAC,gNAAK;gDAAC,WAAU;gDAAU,eAAY;;;;;;4CAAS;0DAEhD,6LAAC,sOAAW;gDACV,WAAW,AAAC,gCAA4D,OAA7B,WAAW,eAAe;gDACrE,eAAY;;;;;;;;;;;;oCAIf,0BACC,6LAAC;wCACC,MAAK;wCACL,cAAW;wCACX,WAAU;;0DAGV,6LAAC;gDAAI,WAAU;0DAAoE;;;;;;0DAKnF,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAG,WAAU;8DACX,UAAU,GAAG,CAAC,CAAC,GAAG;wDACjB,MAAM,YAAY,MAAM;wDACxB,qBACE,6LAAC;4DAAmB,WAAU;sEAC3B,YACC,8CAA8C;0EAC9C,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEAAI,WAAU;kFACZ,EAAE,OAAO;;;;;;kFAEZ,6LAAC;wEAAI,WAAU;kFACZ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,kBACd,6LAAC;gFAEC,MAAM,QAAQ;gFACd,WAAU;gFACV,OAAO,AAAC,QAAS,OAAF;0FAEd;+EALI;;;;;;;;;;;;;;;2GAWb,sCAAsC;0EACtC;;kFACE,6LAAC;wEAAI,WAAU;kFACZ,EAAE,OAAO;;;;;;kFAEZ,6LAAC;wEAAI,WAAU;kFACZ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,kBACd,6LAAC;gFAEC,MAAM,QAAQ;gFACd,WAAU;gFACV,OAAO,AAAC,QAAS,OAAF;0FAEd;+EALI;;;;;;;;;;;;2DA7BR,EAAE,OAAO;;;;;oDA0CtB;;;;;;;;;;;;;;;;;;;;;;;0CAOV,6LAAC;gCAAE,MAAK;gCAAmB,WAAW;;kDACpC,6LAAC,6MAAI;wCAAC,WAAU;wCAAU,eAAY;;;;;;oCAAS;;;;;;;0CAKjD,6LAAC;gCAAI,WAAU;gCAAW,KAAK;;kDAC7B,6LAAC;wCACC,KAAK;wCACL,SAAS;4CACP,eAAe,CAAC,IAAM,CAAC;4CACvB,YAAY;wCACd;wCACA,WAAU;wCACV,iBAAc;wCACd,iBAAe;;0DAEf,6LAAC,gOAAS;gDAAC,WAAU;gDAAqB,eAAY;;;;;;0DACtD,6LAAC;0DAAK;;;;;;0DACN,6LAAC,sOAAW;gDACV,WAAW,AAAC,gCAA+D,OAAhC,cAAc,eAAe;gDACxE,eAAY;;;;;;;;;;;;oCAIf,6BACC,6LAAC;wCACC,MAAK;wCACL,cAAW;wCACX,WAAU;;0DAEV,6LAAC;gDACC,MAAK;gDACL,MAAK;gDACL,WAAU;gDACV,SAAS,IAAM,eAAe;;kEAE9B,6LAAC,6MAAI;wDAAC,WAAU;wDAAU,eAAY;;;;;;oDAAS;;;;;;;0DAGjD,6LAAC;gDACC,MAAK;gDACL,MAAK;gDACL,WAAU;gDACV,SAAS,IAAM,eAAe;;kEAE9B,6LAAC,yNAAQ;wDAAC,WAAU;wDAAU,eAAY;;;;;;oDAAS;;;;;;;0DAGrD,6LAAC;gDAAI,WAAU;;;;;;0DACf,6LAAC;gDACC,SAAS;gDACT,MAAK;gDACL,MAAK;gDACL,WAAU;;kEAEV,6LAAC,uNAAM;wDAAC,WAAU;wDAAU,eAAY;;;;;;oDAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAarE;GAhOM;;QAGa,kJAAO;;;KAHpB;uCAkOS","debugId":null}},
    {"offset": {"line": 2045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shivansh%20Rana/Desktop/DTU%20Academic/Codes/WEBD/SIH25008/frontend/src/app/dashboard/student/page.js"],"sourcesContent":["'use client';\r\n\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { FaBook, FaCalendarAlt, FaClipboardList, FaBell, FaUserCircle } from 'react-icons/fa';\r\nimport AuthDiagnosticTool from '@/app/components/AuthDiagnosticTool';\r\nimport Link from 'next/link';\r\nimport { FaArrowRight } from 'react-icons/fa';\r\nimport NotificationsList from '@/app/components/NotificationsList';\r\nimport DashboardHeader from '@/app/components/DashboardHeader';\r\n\r\n\r\n// small, accessible progress bar\r\nfunction ProgressBar({ value = 0, label = 'Progress' }) {\r\n  const pct = Math.max(0, Math.min(100, value));\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-1\">\r\n        <span className=\"text-xs font-medium text-gray-600\">{label}</span>\r\n        <span className=\"text-xs text-gray-500\">{pct}%</span>\r\n      </div>\r\n      <div\r\n        className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\"\r\n        role=\"progressbar\"\r\n        aria-valuemin={0}\r\n        aria-valuemax={100}\r\n        aria-valuenow={pct}\r\n        aria-label={label}\r\n      >\r\n        <div\r\n          className=\"h-2 bg-gradient-to-r from-blue-600 to-indigo-600\"\r\n          style={{ width: `${pct}%` }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function StudentDashboard() {\r\n  const { user, loading, getUserProfile, logout } = useAuth();\r\n  const router = useRouter();\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\nuseEffect(() => {\r\n  // If not loading and no user, redirect to login\r\n  if (!loading && !user) {\r\n    console.log('No user detected, redirecting to login');\r\n    router.push('/login');\r\n    return; // Early return prevents further execution\r\n  }\r\n  \r\n  // If user exists, get the latest profile data\r\n  if (user) {\r\n    let isMounted = true; // Flag to track component mount state\r\n    \r\n    // Set loading state before API call\r\n    setIsLoading(true);\r\n    \r\n    // Add a small delay to prevent rapid consecutive calls\r\n    const timeoutId = setTimeout(async () => {\r\n      try {\r\n        // Get user profile data with allowRetry=false to prevent infinite loops\r\n        const profileData = await getUserProfile(false);\r\n        \r\n        // If component unmounted during the API call, don't update state\r\n        if (!isMounted) {\r\n          console.log('Component unmounted, skipping state updates');\r\n          return;\r\n        }\r\n        \r\n        console.log('Profile loaded successfully');\r\n        setIsLoading(false);\r\n        \r\n        // If profile data is null, redirect to login\r\n        if (!profileData) {\r\n          console.log('No profile data returned, redirecting to login');\r\n          router.push('/login');\r\n          return;\r\n        }\r\n        \r\n        // Verify user role is student, redirect otherwise\r\n        if (profileData.role !== 'student') {\r\n          console.log('User is not a student, redirecting');\r\n          router.push(`/dashboard/${profileData.role}`);\r\n          return;\r\n        }\r\n      } catch (error) {\r\n        // Only update state and redirect if component is still mounted\r\n        if (isMounted) {\r\n          console.error('Error fetching user profile:', error);\r\n          setIsLoading(false);\r\n          router.push('/login');\r\n        }\r\n      }\r\n    }, 300);\r\n    \r\n    // Cleanup function to handle unmounting\r\n    return () => {\r\n      console.log('Dashboard useEffect cleanup - preventing state updates after unmount');\r\n      clearTimeout(timeoutId);\r\n      isMounted = false;\r\n    };\r\n  } else {\r\n    setIsLoading(false);\r\n  }\r\n}, []); // getUserProfile is intentionally excluded from dependencies to prevent infinite loops\r\n  \r\n  // Show loading spinner when fetching profile\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4\">\r\n        <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n        <p className=\"text-gray-600 text-lg\">Loading student dashboard...</p>\r\n      </div>\r\n    );\r\n  }\r\n  // If you want to vary the dummy progress per card, tweak these:\r\n  const modules = [\r\n    {\r\n      key: 'earthquake',\r\n      title: 'Earthquake',\r\n      href: '/dashboard/student/earthquakes',\r\n      progress: 45,\r\n      accent: 'from-blue-600 to-indigo-600',\r\n      img: { src: '/earthquake.png', alt: 'Seismic landscape representing earthquake preparedness' },\r\n    },\r\n    {\r\n      key: 'fire',\r\n      title: 'Fire',\r\n      href: '/dashboard/student/fire',\r\n      progress: 10,\r\n      accent: 'from-rose-600 to-orange-600',\r\n      img: { src: '/fire.jpg', alt: 'Fire safety imagery with flames and smoke' },\r\n    },\r\n    {\r\n      key: 'flood',\r\n      title: 'Flood',\r\n      href: '/dashboard/student/flood',\r\n      progress: 30,\r\n      accent: 'from-cyan-600 to-blue-600',\r\n      img: { src: '/flood.jpg', alt: 'Flooded street representing flood preparedness' },\r\n    },\r\n\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-700 font-medium\">Loading your dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <DashboardHeader user={user} logout={logout} />\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 py-2 sm:px-6 lg:px-8\">\r\n        <div className=\"max-w-7xl mx-auto space-y-4\">\r\n\r\n        {/* Header with welcome banner */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 mb-8 text-white\">\r\n          <div className=\"flex flex-col md:flex-row items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold\">Welcome back, {user?.name || 'Student'}!</h1>\r\n              <p className=\"mt-2 text-blue-100\">Your disaster management training dashboard</p>\r\n            </div>\r\n            {/* <div className=\"mt-4 md:mt-0 flex items-center\">\r\n              {user?.profilePic ? (\r\n                <img \r\n                  src={user.profilePic} \r\n                  alt=\"Profile\" \r\n                  className=\"w-16 h-16 rounded-full object-cover border-2 border-white shadow\" \r\n                />\r\n              ) : (\r\n                <img \r\n                  src=\"/uploads/default.png\" \r\n                  alt=\"Default Profile\" \r\n                  className=\"w-16 h-16 rounded-full object-cover border-2 border-white shadow\" \r\n                />\r\n              )}\r\n              <div className=\"ml-4\">\r\n                <p className=\"font-medium\">{user?.username || 'student@example.com'}</p>\r\n                <p className=\"text-sm text-blue-200\">Student</p>\r\n              </div>\r\n            </div> */}\r\n          </div>\r\n        </div>\r\n\r\n          {/* Notifications */}\r\n          <div className=\"bg-white rounded-xl shadow-md p-5 sm:p-6\">\r\n            <div className=\"flex items-center justify-between mb-0 \">\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-gray-800\">Alerts!</h2>\r\n              {/* optional: a small refresh hint or time */}\r\n            </div>\r\n            <NotificationsList />\r\n          </div>\r\n\r\n          {/* Three cards in a row (stack on small) */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            {modules.map((m) => (\r\n              <div key={m.key} className=\"bg-white rounded-xl shadow-md p-5 sm:p-6 flex flex-col\">\r\n                <div className=\"mb-4\">\r\n                  <div className={`inline-flex items-center rounded-lg px-3 py-1 text-sm font-medium text-white bg-gradient-to-r ${m.accent} shadow-sm`}>\r\n                    {m.title}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm text-gray-600 mb-3\">\r\n                    Continue your learning module on {m.title.toLowerCase()} preparedness.\r\n                  </p>\r\n                                  <div className=\"relative aspect-[16/9] w-full overflow-hidden rounded-lg mb-3\">\r\n                  <img\r\n                    src={m.img.src}\r\n                    alt={m.img.alt}\r\n                    loading=\"lazy\"\r\n                    className=\"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105\"\r\n                  />\r\n                  <div className=\"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent\" />\r\n                </div>\r\n                  <ProgressBar value={m.progress} label={`${m.title} module`} />\r\n                </div>\r\n\r\n                <div className=\"mt-5\">\r\n                  <Link\r\n                    href={m.href}\r\n                    className=\"inline-flex items-center justify-center gap-2 w-full sm:w-auto rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-4 py-2 shadow-sm transition-colors\"\r\n                    prefetch\r\n                  >\r\n                    Continue\r\n                    <FaArrowRight aria-hidden=\"true\" />\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n        </div>\r\n        {/* Add the diagnostic tool for debugging authentication issues */}\r\n        <AuthDiagnosticTool />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},60183,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(43476),s=e.i(71645),o=e.i(18566),r=e.i(61999);function a(){let e=(0,o.useRouter)(),a=(0,o.useSearchParams)(),l=(0,r.useToast)();return(0,s.useEffect)(()=>{l.showSuccessToast("Login successful! Redirecting to dashboard...")},[l]),(0,s.useEffect)(()=>{let t=a.get("token"),s=a.get("userId");t&&s?fetch("http://localhost:5000/api/users/profile",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw Error("Failed to fetch user profile");return e.json()}).then(o=>{let r={_id:s,name:o.name,email:o.email,role:o.role,token:t};localStorage.setItem("user",JSON.stringify(r)),l.showSuccessToast("Successfully logged in with Google!"),"student"===o.role?e.push("/dashboard/student"):"teacher"===o.role?e.push("/dashboard/teacher"):e.push("/")}).catch(t=>{console.error("Error during Google auth success:",t),l.showErrorToast("Failed to complete Google authentication"),e.push("/login")}):(l.showErrorToast("Authentication failed. Missing token or user ID."),e.push("/login"))},[a,e,l]),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:(0,t.jsxs)("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Completing login..."}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Please wait while we redirect you to your dashboard."})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})]})})}}]);